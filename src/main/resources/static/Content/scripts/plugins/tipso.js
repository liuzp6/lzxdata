(function(n,t,i,r){function e(t,i){this.element=n(t);this.settings=n.extend({},o,i);this._defaults=o;this._name=u;this._title=this.element.attr("title");this.mode="hide";this.init()}function h(){var n=t.navigator.msMaxTouchPoints,r="ontouchstart"in i.createElement("div");return n||r?!0:!1}function f(t){var i=t.clone(),r;return i.css("visibility","hidden"),n("body").append(i),r=i.outerHeight(),i.remove(),r}function s(i){var r=i.tooltip(),o=i.element,u=i,s=n(t),c=10,h,e,l;switch(u.settings.position){case"top":e=o.offset().left+o.outerWidth()/2-r.outerWidth()/2;h=o.offset().top-f(r)-c;r.find(".tipso_arrow").css({marginLeft:-8});h<s.scrollTop()?(h=o.offset().top+o.outerHeight()+c,r.find(".tipso_arrow").css({"border-bottom-color":u.settings.background,"border-top-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("bottom")):(r.find(".tipso_arrow").css({"border-top-color":u.settings.background,"border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("top"));break;case"bottom":e=o.offset().left+o.outerWidth()/2-r.outerWidth()/2;h=o.offset().top+o.outerHeight()+c;r.find(".tipso_arrow").css({marginLeft:-8});h+f(r)>s.scrollTop()+s.outerHeight()?(h=o.offset().top-f(r)-c,r.find(".tipso_arrow").css({"border-top-color":u.settings.background,"border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("top")):(r.find(".tipso_arrow").css({"border-bottom-color":u.settings.background,"border-top-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass(u.settings.position));break;case"left":e=o.offset().left-r.outerWidth()-c;h=o.offset().top+o.outerHeight()/2-f(r)/2;r.find(".tipso_arrow").css({marginTop:-8,marginLeft:""});e<s.scrollLeft()?(e=o.offset().left+o.outerWidth()+c,r.find(".tipso_arrow").css({"border-right-color":u.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("right")):(r.find(".tipso_arrow").css({"border-left-color":u.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass(u.settings.position));break;case"right":e=o.offset().left+o.outerWidth()+c;h=o.offset().top+o.outerHeight()/2-f(r)/2;r.find(".tipso_arrow").css({marginTop:-8,marginLeft:""});e+c+u.settings.width>s.scrollLeft()+s.outerWidth()?(e=o.offset().left-r.outerWidth()-c,r.find(".tipso_arrow").css({"border-left-color":u.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("left")):(r.find(".tipso_arrow").css({"border-right-color":u.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass(u.settings.position))}e<s.scrollLeft()&&(u.settings.position=="bottom"||u.settings.position=="top")&&(r.find(".tipso_arrow").css({marginLeft:e-8}),e=0);e+u.settings.width>s.outerWidth()&&(u.settings.position=="bottom"||u.settings.position=="top")&&(l=s.outerWidth()-(e+u.settings.width),r.find(".tipso_arrow").css({marginLeft:-l-8,marginTop:""}),e=e+l);e<s.scrollLeft()&&(u.settings.position=="left"||u.settings.position=="right")&&(e=o.offset().left+o.outerWidth()/2-r.outerWidth()/2,r.find(".tipso_arrow").css({marginLeft:-8,marginTop:""}),h=o.offset().top-f(r)-c,h<s.scrollTop()?(h=o.offset().top+o.outerHeight()+c,r.find(".tipso_arrow").css({"border-bottom-color":u.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("bottom")):(r.find(".tipso_arrow").css({"border-top-color":u.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("top")),e+u.settings.width>s.outerWidth()&&(l=s.outerWidth()-(e+u.settings.width),r.find(".tipso_arrow").css({marginLeft:-l-8,marginTop:""}),e=e+l),e<s.scrollLeft()&&(r.find(".tipso_arrow").css({marginLeft:e-8}),e=0));e+u.settings.width>s.outerWidth()&&(u.settings.position=="left"||u.settings.position=="right")&&(e=o.offset().left+o.outerWidth()/2-r.outerWidth()/2,r.find(".tipso_arrow").css({marginLeft:-8,marginTop:""}),h=o.offset().top-f(r)-c,h<s.scrollTop()?(h=o.offset().top+o.outerHeight()+c,r.find(".tipso_arrow").css({"border-bottom-color":u.settings.background,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("bottom")):(r.find(".tipso_arrow").css({"border-top-color":u.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),r.removeClass("top bottom left right"),r.addClass("top")),e+u.settings.width>s.outerWidth()&&(l=s.outerWidth()-(e+u.settings.width),r.find(".tipso_arrow").css({marginLeft:-l-8,marginTop:""}),e=e+l),e<s.scrollLeft()&&(r.find(".tipso_arrow").css({marginLeft:e-8}),e=0));r.css({left:e+u.settings.offsetX,top:h+u.settings.offsetY})}var u="tipso",o={speed:400,background:"#3498db",color:"#ffffff",position:"top",width:200,delay:200,offsetX:0,offsetY:0,content:null,ajaxContentUrl:null,useTitle:!0,onBeforeShow:null,onShow:null,onHide:null};n.extend(e.prototype,{init:function(){var t=this,r=this.element;if(r.addClass("tipso_style").removeAttr("title"),h()){r.on("click."+u,function(n){t.mode=="hide"?t.show():t.hide();n.stopPropagation()});n(i).on("click",function(){t.mode=="show"&&t.hide()})}else{r.on("mouseover."+u,function(){t.show()});r.on("mouseout."+u,function(){t.hide()})}},tooltip:function(){return this.tipso_bubble||(this.tipso_bubble=n('<div class="tipso_bubble"><div class="tipso_content"><\/div><div class="tipso_arrow"><\/div><\/div>')),this.tipso_bubble},show:function(){var r=this.tooltip(),i=this,u=n(t);if(n.isFunction(i.settings.onBeforeShow))i.settings.onBeforeShow(n(this));r.css({background:i.settings.background,color:i.settings.color,width:i.settings.width}).hide();r.find(".tipso_content").html(i.content());s(i);u.resize(function(){s(i)});i.timeout=t.setTimeout(function(){r.appendTo("body").stop(!0,!0).fadeIn(i.settings.speed,function(){if(i.mode="show",n.isFunction(i.settings.onShow))i.settings.onShow(n(this))})},i.settings.delay)},hide:function(){var i=this,r=this.tooltip();t.clearTimeout(i.timeout);i.timeout=null;r.stop(!0,!0).fadeOut(i.settings.speed,function(){if(n(this).remove(),n.isFunction(i.settings.onHide)&&i.mode=="show")i.settings.onHide(n(this));i.mode="hide"})},destroy:function(){var n=this.element;n.off("."+u);n.removeData(u);n.removeClass("tipso_style").attr("title",this._title)},content:function(){var i=this.element,t=this,r=this._title;return t.settings.ajaxContentUrl?n.ajax({type:"GET",url:t.settings.ajaxContentUrl,async:!1}).responseText:t.settings.content?t.settings.content:t.settings.useTitle===!0?r:i.data("tipso")},update:function(n,t){var i=this;if(t)i.settings[n]=t;else return i.settings[n]}});n[u]=n.fn[u]=function(t){var f=arguments,i;return t===r||typeof t=="object"?(this instanceof n||n.extend(o,t),this.each(function(){n.data(this,"plugin_"+u)||n.data(this,"plugin_"+u,new e(this,t))})):typeof t=="string"&&t[0]!=="_"&&t!=="init"?(this.each(function(){var r=n.data(this,"plugin_"+u);r||(r=n.data(this,"plugin_"+u,new e(this,t)));r instanceof e&&typeof r[t]=="function"&&(i=r[t].apply(r,Array.prototype.slice.call(f,1)));t==="destroy"&&n.data(this,"plugin_"+u,null)}),i!==r?i:this):void 0}})(jQuery,window,document)